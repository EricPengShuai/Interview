# èƒŒåŒ…é—®é¢˜

## 0. èµ·æº

### `0-1`èƒŒåŒ…ï¼šæœ€å¤§æœ€å°é—®é¢˜

- **æ¦‚å¿µ**ï¼šä¸€å…±æœ‰Nä»¶ç‰©å“ï¼Œç¬¬`i`ï¼ˆiä»1å¼€å§‹ï¼‰ä»¶ç‰©å“çš„é‡é‡ä¸º`w[i]`ï¼Œä»·å€¼ä¸º`v[i]`ã€‚åœ¨æ€»é‡é‡ä¸è¶…è¿‡èƒŒåŒ…æ‰¿è½½ä¸Šé™`W`çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿè£…å…¥èƒŒåŒ…çš„æœ€å¤§ä»·å€¼æ˜¯å¤šå°‘ï¼Ÿ
- **æ€è·¯**ï¼šå®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„` dp` å­˜å‚¨æœ€å¤§ä»·å€¼ï¼Œå…¶ä¸­` dp[i][j] `è¡¨ç¤º**å‰` i `ä»¶ç‰©å“ä½“ç§¯ä¸è¶…è¿‡` j` çš„æƒ…å†µä¸‹èƒ½è¾¾åˆ°çš„æœ€å¤§ä»·å€¼**ã€‚è®¾ç¬¬` i `ä»¶ç‰©å“ä½“ç§¯ä¸º` w`ï¼Œä»·å€¼ä¸º` v`ï¼Œæ ¹æ®ç¬¬` i `ä»¶ç‰©å“æ˜¯å¦æ·»åŠ åˆ°èƒŒåŒ…ä¸­ï¼Œå¯ä»¥åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š
  - **ç¬¬` i `ä»¶ç‰©å“æ²¡æ·»åŠ åˆ°èƒŒåŒ…**ï¼Œæ€»ä½“ç§¯ä¸è¶…è¿‡` j` çš„å‰` i` ä»¶ç‰©å“çš„æœ€å¤§ä»·å€¼å°±æ˜¯æ€»ä½“ç§¯ä¸è¶…è¿‡` j `çš„å‰` i-1 `ä»¶ç‰©å“çš„æœ€å¤§ä»·å€¼ï¼Œ$dp[i][j] = dp[i-1][j]$
  - **ç¬¬` i `ä»¶ç‰©å“æ·»åŠ åˆ°èƒŒåŒ…ä¸­**ï¼Œ$dp[i][j] = dp[i-1][j-w[i]] + v[i]$

- çŠ¶æ€è½¬æ¢æ–¹ç¨‹ï¼š$dp[i][j] = max(dp[i-1][j], dp[i-1][j-w[i]]+v[i]) , j >= w[i]$

- æºä»£ç ï¼š

  ```cpp
  // w è¡¨ç¤ºèƒŒåŒ…æ€»ä½“ç§¯
  // weights è¡¨ç¤ºç‰©ä½“çš„é‡é‡
  // values è¡¨ç¤ºç‰©ä½“çš„ä»·å€¼ï¼Œå’Œ weights ä¸€ä¸€å¯¹åº”
  int backpack(int w, vector<int> &weights, vector<int> &values) {
  	int n = weights.size();
  	vector<vector<int>> dp(n, vector<int>(w))
  	for(int i = 0; i < n; ++ i) {
  		for (int j = 0; j < w; ++ j) {
  			if (j >= w[i]) {
  				// èƒŒåŒ…æ‰¿å—åŠ›è¶³å¤Ÿæ”¾ä¸‹ç¬¬ i ä¸ªç‰©ä½“
  				dp[i][j] = max(dp[i-1][j], dp[i-1][j-w[i]] + v[i]);
  			} else {
  				// èƒŒåŒ…æ‰¿å—åŠ›ä¸å¤Ÿæ”¾ä¸‹ç¬¬ i ä¸ªç‰©ä½“
  				dp[i][j] = dp[i-1][j];
  			}
  		}
  	}
  	return dp[n-1][w-1];
  }
  ```

> æœ€åï¼šå¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ç©ºé—´çš„ï¼Œè¿™é‡Œä¸ç»†è¯´äº†ï¼Œæ³¨æ„ç¬¬äºŒä¸ªå¾ªç¯éœ€è¦å€’å™éå†ï¼Œå…·ä½“å‚è€ƒï¼š[CyC2018](https://github.com/CyC2018/CS-Notes/blob/master/notes/Leetcode%20é¢˜è§£%20-%20åŠ¨æ€è§„åˆ’.md#0-1-èƒŒåŒ…)



### å®Œå…¨èƒŒåŒ…é—®é¢˜

- **æ¦‚å¿µ**ï¼šå’Œ0-1èƒŒåŒ…é—®é¢˜ç›¸ä¼¼ï¼Œåªæ˜¯æ¯ä¸ªé‡é‡çš„ç‰©ä½“æœ‰æ— æ•°å¤šä¸ªï¼Œä¹Ÿå°±å¯ä»¥é‡å¤æ”¾æŸä¸ªä»·å€¼çš„ç‰©ä½“ï¼Œæœ€ç»ˆç›®çš„å°±æ˜¯è®©èƒŒåŒ…çš„æ€»ä»·å€¼æœ€å¤§

- **æ€è·¯**ï¼šæ€»ä½“æ€æƒ³å’Œ0-1èƒŒåŒ…ä¸€æ ·
  - **ç¬¬` i `ä»¶ç‰©å“æ²¡æ·»åŠ åˆ°èƒŒåŒ…**ï¼ŒåŒä¸Šï¼Œ$dp[i][j] = dp[i-1][j]$
  - **ç¬¬` i `ä»¶ç‰©å“æ·»åŠ åˆ°èƒŒåŒ…ä¸­**ï¼Œæ­¤æ—¶å’Œ01èƒŒåŒ…ä¸å¤ªä¸€æ ·ï¼Œå› ä¸ºæ¯ç§ç‰©å“æœ‰æ— é™ä¸ªï¼ˆä½†æ³¨æ„ä¹¦åŒ…é™é‡æ˜¯æœ‰é™çš„ï¼‰ï¼Œæ‰€ä»¥æ­¤æ—¶ä¸åº”è¯¥è½¬ç§»åˆ°`dp[iâˆ’1][jâˆ’w[i]]`è€Œåº”è¯¥è½¬ç§»åˆ°`dp[i][jâˆ’w[i]]`ï¼Œå³è£…å…¥ç¬¬iç§å•†å“åè¿˜å¯ä»¥å†ç»§ç»­è£…å…¥ç¬¬ç§å•†å“ã€‚$dp[i][j] = dp[i][j-w[i]] + v[i]$

- çŠ¶æ€è½¬æ¢æ–¹ç¨‹ï¼š$dp[i][j] = max(dp[i-1][j], dp[i][j-w[i]]+v[i]) , j >= w[i]$

- æºä»£ç ï¼š

  ```cpp
  // w è¡¨ç¤ºèƒŒåŒ…æ€»ä½“ç§¯
  // weights è¡¨ç¤ºç‰©ä½“çš„é‡é‡
  // values è¡¨ç¤ºç‰©ä½“çš„ä»·å€¼ï¼Œå’Œ weights ä¸€ä¸€å¯¹åº”
  int backpack(int w, vector<int> &weights, vector<int> &values) {
  	int n = weights.size();
  	vector<vector<int>> dp(n, vector<int>(w))
  	for(int i = 0; i < n; ++ i) {
  		for (int j = 0; j < w; ++ j) {
  			if (j >= w[i]) {
  				// èƒŒåŒ…æ‰¿å—åŠ›è¶³å¤Ÿæ”¾ä¸‹ç¬¬ i ä¸ªç‰©ä½“
  				dp[i][j] = max(dp[i-1][j], dp[i][j-w[i]] + v[i]);
  			} else {
  				// èƒŒåŒ…æ‰¿å—åŠ›ä¸å¤Ÿæ”¾ä¸‹ç¬¬ i ä¸ªç‰©ä½“
  				dp[i][j] = dp[i-1][j];
  			}
  		}
  	}
  	return dp[n-1][w-1];
  }
  ```

> åŒç†å¯ä»¥ä¼˜åŒ–ç©ºé—´ï¼Œå¥½åƒéœ€è¦æ³¨æ„ï¼šç¬¬äºŒä¸ªå¾ªç¯æ­£åºéå†ï¼Œä¸å¤ªæ‡‚ï¼Œå…·ä½“å‚è€ƒ[å®Œå…¨èƒŒåŒ…-çŸ¥ä¹](https://zhuanlan.zhihu.com/p/93857890?utm_source=wechat_session)



### å¤šé‡èƒŒåŒ…é—®é¢˜

- å…ˆä¸æ•´ç†äº†ï¼Œæœ‰ç‚¹è´¹è„‘å­

### æ··åˆèƒŒåŒ…æˆ–è€…å¤šç»´åº¦èƒŒåŒ…

- å¤ªéš¾äº†ï¼ŒğŸ¤®äº†ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ[ä¹è®²èƒŒåŒ…é—®é¢˜](https://github.com/tianyicui/pack/blob/master/V2.pdf)



## 1. LeetCodeå®æˆ˜

> å‚è€ƒï¼š[åŠ›æ‰£-æ¾œå±±](https://leetcode-cn.com/problems/combination-sum-iv/solution/xi-wang-yong-yi-chong-gui-lu-gao-ding-bei-bao-wen-/)

### 0. ç»„åˆé—®é¢˜

```python
dp[i] += dp[i-num]
  
// ç»„åˆé—®é¢˜éœ€è€ƒè™‘å…ƒç´ ä¹‹é—´çš„é¡ºåºï¼Œéœ€å°†targetæ”¾åœ¨å¤–å¾ªç¯ï¼Œå°†numsæ”¾åœ¨å†…å¾ªç¯
for i in range(1, target+1):
    for num in nums:
```

**377.ç»„åˆæ€»å’Œ â…£ã€494.ç›®æ ‡å’Œã€518.é›¶é’±å…‘æ¢ II**

- è¿™é‡Œå±•ç¤ºä¸€ä¸‹[377.ç»„åˆæ€»å’Œ â…£](https://leetcode-cn.com/problems/combination-sum-iv/description/)ï¼Œè¿™æ˜¯éœ€è¦è€ƒè™‘æ¯ä¸ªæ•°å­—ä¹‹é—´çš„é¡ºåºçš„ï¼Œæ‰€ä»¥æ˜¯ç»„åˆé—®é¢˜

  - ç”¨ **dp[x]** è¡¨ç¤ºé€‰å–çš„å…ƒç´ ä¹‹å’Œç­‰äº **x**çš„æ–¹æ¡ˆæ•°ï¼Œç›®æ ‡æ˜¯æ±‚ **dp[target]**ã€‚
  - åŠ¨æ€è§„åˆ’çš„è¾¹ç•Œæ˜¯**dp[0]=1**ï¼Œæœ‰å½“ä¸é€‰å–ä»»ä½•å…ƒç´ æ—¶ï¼Œå…ƒç´ ä¹‹å’Œæ‰ä¸º 0ï¼Œå› æ­¤åªæœ‰ 1 ç§æ–¹æ¡ˆã€‚
  - å½“$1 <= i <= target$ï¼Œå¦‚æœå­˜åœ¨ä¸€ç§æ’åˆ—ï¼Œå…¶ä¸­çš„å…ƒç´ ä¹‹å’Œç­‰äº iï¼Œåˆ™è¯¥æ’åˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ ä¸€å®šæ˜¯æ•°ç»„ nums ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œå‡è®¾è¯¥æ’åˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ æ˜¯ numï¼Œåˆ™ä¸€å®šæœ‰$num <= i$ï¼Œå¯¹äºå…ƒç´ ä¹‹å’Œç­‰äº **iâˆ’num**çš„æ¯ä¸€ç§æ’åˆ—ï¼Œåœ¨æœ€åæ·»åŠ  **num**ä¹‹åå³å¯å¾—åˆ°ä¸€ä¸ªå…ƒç´ ä¹‹å’Œç­‰äº **i** çš„æ’åˆ—ï¼Œå› æ­¤åœ¨è®¡ç®— **dp[i]**æ—¶ï¼Œåº”è¯¥è®¡ç®—æ‰€æœ‰çš„ **dp[iâˆ’num]** ä¹‹å’Œã€‚
  - å‚è€ƒï¼š[åŠ›æ‰£å®˜æ–¹-é¢˜è§£](https://leetcode-cn.com/problems/combination-sum-iv/solution/zu-he-zong-he-iv-by-leetcode-solution-q8zv/)

  ```cpp
  class Solution {
  public:
      int combinationSum4(vector<int>& nums, int target) {
          vector<unsigned long long> dp(target + 1);
          dp[0] = 1;
          for (int i = 1; i <= target; ++ i) {
              for (auto num: nums) {
                  if (i >= num ) {
                      dp[i] += dp[i-num];
                  }
              }
          }
          return dp[target];
      }
  };
  
  ```

  > è¯´æ˜ä¸€ä¸‹ï¼šè¿™é‡Œä½¿ç”¨unsigned long longæ˜¯ä¸ºäº†é˜²æ­¢æµ‹è¯•æ•°æ®çš„æº¢å‡ºï¼Œå…¶å®è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹æœ‰ç‚¹å†…ä¸ªï¼Œ[æˆ‘çš„ç–‘é—®è§£ç­”](https://leetcode-cn.com/problems/combination-sum-iv/solution/zu-he-zong-he-iv-by-leetcode-solution-q8zv/908055)

### 1. Trueã€Falseé—®é¢˜å…¬å¼

```python
dp[i] = dp[i] or dp[i-num]
```



**139.å•è¯æ‹†åˆ†ã€416.åˆ†å‰²ç­‰å’Œå­é›†**

- è¿™é‡Œå±•ç¤º[139.å•è¯æ‹†åˆ†](https://leetcode-cn.com/problems/word-break/)ï¼š**dp[i]** è¡¨ç¤º **s** çš„å‰ **i** ä½æ˜¯å¦å¯ä»¥ç”¨ **wordDict** ä¸­çš„å•è¯è¡¨ç¤º

  ```cpp
  class Solution {
  public:
      bool wordBreak(string s, vector<string>& wordDict) {
          vector<bool> dp(s.size() + 1);
          // è¿™é‡Œä½¿ç”¨setå®¹å™¨æ˜¯ä¸ºæ–¹ä¾¿æŸ¥æ‰¾
        	unordered_set<string> m(wordDict.begin(), wordDict.end());
          dp[0] = true;
          int maxL = 0;
        	// è¿™é‡Œåšä¸€ä¸ªä¼˜åŒ–ï¼Œæ¯æ¬¡jä¸éœ€è¦ä»0å¼€å§‹éå†ï¼ŒwordDicté‡Œé¢æœ‰ä¸€ä¸ªæœ€å°é•¿åº¦çš„ä¸²
          for (auto s: wordDict) {
              maxL = max(maxL, (int)s.length());
          }
          for (int i = 1; i <= s.size(); ++ i) {
              int start = max(i - maxL, 0);
              for (int j = start; j < i; ++ j) {
                  if (dp[j] && m.find(s.substr(j, i-j)) != m.end()) {
                      dp[i] = true;
                      break;
                  }
              }
          }
          return dp[s.size()];
      }
  };
  ```

  

### 2. æœ€å¤§æœ€å°é—®é¢˜

```python
dp[i] = min(dp[i], dp[i-num]+1) or dp[i] = max(dp[i], dp[i-num]+1)
```

**474.ä¸€å’Œé›¶ã€322.é›¶é’±å…‘æ¢**

- è¿™é‡Œå±•ç¤º[322.é›¶é’±å…‘æ¢](https://leetcode-cn.com/problems/coin-change/)ï¼šè®©æ‰¾çš„é›¶é’±æ•°æœ€å°‘

  - å‡è®¾ `f(n)` ä»£è¡¨è¦å‡‘é½é‡‘é¢ä¸º n æ‰€è¦ç”¨çš„æœ€å°‘ç¡¬å¸æ•°é‡ï¼Œé‚£ä¹ˆæœ‰ï¼š

    $f(n) = min(f(n - c1), f(n - c2), ... f(n - cn)) + 1$

    å…¶ä¸­ `c1 ~ cn` ä¸ºç¡¬å¸çš„æ‰€æœ‰é¢é¢ã€‚

  - å†å…·ä½“è§£é‡Šä¸€ä¸‹è¿™ä¸ªå…¬å¼å§ï¼Œä¾‹å¦‚è¿™ä¸ªç¤ºä¾‹ï¼š

    ```angelscript
    è¾“å…¥: coins = [1, 2, 5], amount = 11
    è¾“å‡º: 3 
    è§£é‡Š: 11 = 5 + 5 + 1
    ```

    é¢˜ç›®æ±‚çš„å€¼ä¸º `f(11)`ï¼Œç¬¬ä¸€æ¬¡é€‰æ‹©ç¡¬å¸æ—¶æˆ‘ä»¬æœ‰ä¸‰ç§é€‰æ‹©ã€‚

    å‡è®¾æˆ‘ä»¬å–é¢é¢ä¸º 1 çš„ç¡¬å¸ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥éœ€è¦å‡‘é½çš„æ€»é‡‘é¢å˜ä¸º `11 - 1 = 10`ï¼Œå³ `f(11) = f(10) + 1`ï¼Œè¿™é‡Œçš„ `+1` å°±æ˜¯æˆ‘ä»¬å–å‡ºçš„é¢é¢ä¸º 1 çš„ç¡¬å¸ã€‚

    åŒç†ï¼Œå¦‚æœå–é¢é¢ä¸º 2 æˆ–é¢é¢ä¸º 5 çš„ç¡¬å¸å¯ä»¥å¾—åˆ°ï¼š

    - `f(11) = f(9) + 1`
    - `f(11) = f(6) + 1`

    æ‰€ä»¥ï¼š

    ```lisp
    f(11) = min(f(10), f(9), f(6)) + 1
    ```

  - å‚è€ƒï¼š[åŠ›æ‰£-æ±Ÿä¸çŸ¥](https://leetcode-cn.com/problems/coin-change/comments/78252)

  ```cpp
  class Solution {
  public:
      int coinChange(vector<int>& coins, int amount) {
          vector<int> dp(amount + 1, INT_MAX);
          dp[0] = 0;
          
          // ä¸¤ç§éå†æ–¹å¼éƒ½å¯ä»¥
          for (int i = 1; i <= amount; ++ i) {
              for (auto c: coins) {
                  if (i >= c && dp[i-c] != INT_MAX) {
                      dp[i] = min(dp[i], dp[i-c] + 1);
                  }
              }
          }
  
          // for (int c: coins) {
          //     for(int j = c; j <= amount; ++ j) {
          //         if(dp[j- c] != INT_MAX) {
          //             dp[j] = min(dp[j], dp[j-c] + 1);
          //         }
          //     }
          // }
  
          return dp[amount] == INT_MAX ? -1 : dp[amount]; 
      }
  };
  ```

  

## 2. Trick

> å‚è€ƒï¼š[åŠ›æ‰£-æ¾œå±±](https://leetcode-cn.com/problems/combination-sum-iv/solution/xi-wang-yong-yi-chong-gui-lu-gao-ding-bei-bao-wen-/)
>
> ä¸è¿‡å¥½åƒä¸æ˜¯å¾ˆç†è§£ï¼ŒğŸ¤’

### èƒŒåŒ…é—®é¢˜æŠ€å·§ï¼š

- å¦‚æœæ˜¯0-1èƒŒåŒ…ï¼Œå³æ•°ç»„ä¸­çš„å…ƒç´ ä¸å¯é‡å¤ä½¿ç”¨ï¼Œnumsæ”¾åœ¨å¤–å¾ªç¯ï¼Œtargetåœ¨å†…å¾ªç¯ï¼Œä¸”å†…å¾ªç¯å€’åºï¼›

  ```python
  for num in nums:
      for i in range(target, nums-1, -1):
  ```

  

- å¦‚æœæ˜¯å®Œå…¨èƒŒåŒ…ï¼Œå³æ•°ç»„ä¸­çš„å…ƒç´ å¯é‡å¤ä½¿ç”¨ï¼Œnumsæ”¾åœ¨å¤–å¾ªç¯ï¼Œtargetåœ¨å†…å¾ªç¯ã€‚ä¸”å†…å¾ªç¯æ­£åºã€‚

  ```python
  for num in nums:
      for i in range(nums, target+1):
  ```

  

- å¦‚æœç»„åˆé—®é¢˜éœ€è€ƒè™‘å…ƒç´ ä¹‹é—´çš„é¡ºåºï¼Œéœ€å°†targetæ”¾åœ¨å¤–å¾ªç¯ï¼Œå°†numsæ”¾åœ¨å†…å¾ªç¯ã€‚

  ```python
  for i in range(1, target+1):
      for num in nums:
  ```

  




